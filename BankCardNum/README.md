### 1.å‰è¨€

å¯¹äºå½“ä¸‹å¾ˆå¤šAppæ¥è¯´ï¼Œä¸šåŠ¡åœºæ™¯æˆ–å¤šæˆ–å°‘éƒ½ä¼šç‰µæ¶‰åˆ°é“¶è¡Œå¡ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰ç»‘å®šé“¶è¡Œå¡çš„åœºæ™¯ã€‚è¾“å…¥æ¡†æ™®ééƒ½æ˜¯ä»¥å››ä½ä¸ºä¸€ç»„çš„æ ¼å¼è¿›è¡Œæ˜¾ç¤ºï¼Œä¾‹å¦‚`1111 1111 1111 1111 111`ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨`UITextField`åšçš„ä¸€äº›å°è¯•ã€‚

### 2.è§£å†³æ€è·¯

#### 2.1 è®¾ç½®UITextFieldä»£ç†

æˆ‘ä»¬éœ€è¦çŸ¥é“ç”¨æˆ·æ¯æ¬¡è¾“å…¥çš„æƒ…å†µï¼Œé¦–å…ˆå°±éœ€è¦ç›‘å¬`UITextField`çš„ä»£ç†`UITextFieldDelegate`æ–¹æ³•ã€‚

é¦–å…ˆè®¾ç½®`UITextField`ä»£ç†

```    
self.bankCardInput.delegate = self;
```

å…¶æ¬¡å†ç›‘å¬è¾“å…¥å˜åŒ–ä»£ç†æ–¹æ³•ã€‚

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string { 
    return YES;
}
```

ä»£ç†æ–¹æ³•è¯´æ˜ã€‚

- textField
    - è¾“å…¥æ§ä»¶
- range
    - è¾“å…¥æ¡†å†…è¦è¢«æ›¿æ¢çš„æ–‡å­—èµ·ç‚¹ä¸æ–‡å­—é•¿åº¦
- string
    - ç”¨æˆ·å°†è¦è¾“å…¥çš„å†…å®¹
- return
    - YES:æ¥æ”¶ç”¨æˆ·è¾“å…¥å†…å®¹
    - NO:å¿½ç•¥ç”¨æˆ·è¾“å…¥å†…å®¹

#### 2.2 æ§åˆ¶ç”¨æˆ·è¾“å…¥ç±»å‹

é“¶è¡Œå¡è¾“å…¥æ¡†é”®ç›˜ä¸€èˆ¬éƒ½æ˜¯ä»¥æ•°å­—é”®ç›˜`UIKeyboardTypeNumberPad(UIKeyboardType)`ä¸ºä¸»ï¼Œæˆ–è€…æœ‰ç‰¹æ®Šè¦æ±‚çš„æ˜¯å…¶ä»–ç±»å‹ã€‚

ä¸ç®¡è¾“å…¥é”®ç›˜çš„ç±»å‹ï¼Œå¯¹äºå®é™…æƒ…å†µé“¶è¡Œå¡çš„è¾“å…¥ï¼Œåªèƒ½æ¥æ”¶æ•°å­—ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»è¦åšä¸€ä¸ªéæ³•å­—ç¬¦è¿‡æ»¤çš„é€»è¾‘ï¼Œæ§åˆ¶è¾“å…¥å­—ç¬¦åªèƒ½æ˜¯æ•°å­—ï¼Œå¦‚æœä¸æ˜¯åˆ™ä¸è¿›è¡Œæ“ä½œå¹¶ä¸”å¿½ç•¥ç”¨æˆ·è¾“å…¥ã€‚

``` 
//å¯æ¥æ”¶å­—ç¬¦ä¸²ç±»å‹ï¼Œ\bæ˜¯åˆ é™¤ç¬¦çš„æ„æ€
NSCharacterSet *canInputSet = [NSCharacterSet characterSetWithCharactersInString:@"0123456789\b"];

//ç¡®ä¿è¾“å…¥å†…å®¹æœ‰æ•ˆ
if ([string rangeOfCharacterFromSet:[canInputSet invertedSet]].location != NSNotFound) {
    return NO;
}
```

#### 2.3 å¤„ç†ç”¨æˆ·è¾“å…¥åçš„å†…å®¹

ç¡®è®¤ç”¨æˆ·è¾“å…¥å†…å®¹åˆæ³•ä¹‹åï¼Œåˆ™éœ€è¦æå–ç”¨æˆ·è¾“å…¥åçš„å†…å®¹ã€‚é€šè¿‡å…¥å‚çš„`range`æ¥è·å–ç”¨æˆ·æœ€åè¾“å…¥åçš„å­—ç¬¦ä¸²ã€‚

ç”±äºæˆ‘ä»¬æ¯4ä½æ•°å­—çš„é—´éš”æ˜¯é€šè¿‡**è¿½åŠ ç©ºæ ¼ç¬¦**æ¥æ˜¯å®ç°çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å¤„ç†æœ€åçš„å­—ç¬¦å‰ï¼Œéœ€è¦å»é™¤æ‰€æœ‰ç©ºæ ¼æ‰æ˜¯ç”¨æˆ·ä¿®æ”¹åçœŸæ­£çš„é“¶è¡Œå¡å·ã€‚

```
//åŸæœ¬çš„æ•°æ®
NSString *baseStr = textField.text;
    
//æ“ä½œåçš„æ•°æ®
NSString *replaceStr = [baseStr stringByReplacingCharactersInRange:range withString:string];

//é‡æ–°æ ¼å¼åŒ–æ•°å­—
NSString *lastStr = [self getFormatBankCardNum:bankCardStr];
```

å»é™¤ç©ºæ ¼å‡½æ•°

```
+(NSString *)getBankCardNumFromFormatStr:(NSString *)baseStr{
    baseStr = [baseStr stringByReplacingOccurrencesOfString:@" " withString:@""];
    return baseStr;
}
```

#### 2.4 é‡æ–°æ ¼å¼åŒ–ä¿®æ”¹åçš„é“¶è¡Œå¡å·

æ‹¿åˆ°æœ€åçš„é“¶è¡Œå¡åï¼Œå°±å¯ä»¥ç”¨ä½œé‡æ–°æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ã€‚æ•´ä¸ªæµç¨‹æ˜¯ï¼š

é€šè¿‡å­—ç¬¦ä¸²æˆªå–æ–¹å¼ç”Ÿæˆæ–°çš„æ ¼å¼åŒ–å­—ç¬¦ï¼Œå…·ä½“æ˜¯ä»¥4ä½ä½œä¸ºä¸€ç»„è¿›è¡Œæˆªå–ï¼Œå¦‚æœå°‘äº4ä½åˆ™é€šè¿‡å¯ç”¨å­—ç¬¦ä¸²é•¿åº¦è¿›è¡Œæˆªå–ï¼Œç›´åˆ°æ•´ä¸ªå­—ç¬¦ä¸²æˆªå–å®Œæ¯•ã€‚

åœ¨æˆªå–è¿‡ç¨‹ï¼Œå¦‚æœæˆªå–ä½æ•°ä¸º4ä½åˆ™åœ¨æ–°å­—ç¬¦ä¸²åè¿½åŠ ä¸€ä¸ªç©ºæ ¼ã€‚

å¾—å‡ºæœ€åç»“æœåï¼Œè¿˜éœ€è¦é€šè¿‡å»é™¤æ–°çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²**å‰å**ä¸éœ€è¦çš„å†…å®¹ï¼ˆæ•°å­—ä»¥å¤–çš„å†…å®¹ï¼‰ã€‚

```
//æŒ‰ç…§å››ä½ä¸ºä¸€ç»„çš„å½¢å¼æ ¼å¼åŒ–é“¶è¡Œå¡å·
+(NSString *)getFormatBankCardNum:(NSString *)bankCardNum{
   
    NSString *result = @"";
   
    while (bankCardNum.length > 0) {
        
        //æå–å¯ç”¨å­—ç¬¦
        NSString *sub = [bankCardNum substringToIndex:MIN(bankCardNum.length, 4)];
        
        //è¿½åŠ å­—ç¬¦
        result = [result stringByAppendingString:sub];
        
        //å¦‚æœæ˜¯4ä½åˆ™åœ¨åé¢è¿½åŠ ç©ºæ ¼
        if (sub.length == 4) {
            result = [result stringByAppendingString:@" "];
        }
        //æå–åé¢å…ƒç´ ï¼Œä½œä¸ºè¦å¤„ç†å­—ç¬¦
        bankCardNum = [bankCardNum substringFromIndex:MIN(bankCardNum.length, 4)];
    }
    
    //å»é™¤ä¸éœ€è¦å­—ç¬¦
    NSCharacterSet *canInputSet = [NSCharacterSet characterSetWithCharactersInString:@"0123456789\b"];

    result = [result stringByTrimmingCharactersInSet:[canInputSet invertedSet]];

    return result;
}
```

#### 2.5 å…‰æ ‡å¤„ç†

è®¾ç½®äº†æ–°å­—ç¬¦åˆ°`UITextField`åï¼Œç”±äºç”¨æˆ·æ–°ç¼–è¾‘å¯¼è‡´ï¼Œå¯èƒ½ä¼šå¯¼è‡´å…‰æ ‡ä¼šé”™ä¹±ï¼Œæ‰€ä»¥éœ€è¦é‡æ–°è°ƒæ•´å…‰æ ‡ä½ç½®ã€‚

å…ˆæå–åŸæ¥è¾“å…¥æ¡†å†…å…‰æ ‡å³ä¾§çš„å­—ç¬¦ï¼Œå»é™¤ç©ºæ ¼åï¼Œå¾—å‡ºçº¯æ•°å­—ï¼Œç”¨ä½œè®¡ç®—å…‰æ ‡å³è¾¹æœ‰æ•ˆå­—ç¬¦æ‰€ç”¨ã€‚

å†è®¡ç®—æ–°å­—ç¬¦å¯¹åº”å…‰æ ‡ä½ç½®ï¼Œç”¨**2.3**ä¸­æœ€åä¿®æ”¹çš„é“¶è¡Œå¡å·ç®—å‡ºæ•´ä¸ªå¡å·æ•°å­—è¯¥æœ‰çš„ç©ºæ ¼æ•°ï¼Œå†é€šè¿‡å‡å»å…‰æ ‡å³è¾¹æœ‰æ•ˆå­—ç¬¦æ•°è®¡ç®—å¾—å‡ºå…‰æ ‡å·¦è¾¹è¯¥æœ‰çš„ç©ºæ ¼æ•°ï¼Œå°†ä¸¤ä¸ªç©ºæ ¼æ•°ç›¸å‡å°±æ˜¯å…‰æ ‡å³è¾¹è¯¥æœ‰çš„ç©ºæ ¼æ•°ã€‚

å†åŠ ä¸ŠåŸæœ¬å…‰æ ‡å³ä¾§çš„æœ‰æ•ˆæ•°å­—ï¼Œå°±æ˜¯æ–°å­—ç¬¦å…‰æ ‡ä»å³å¾€å·¦ï¼Œå…‰æ ‡ç§»åŠ¨æ­¥æ•°ã€‚

è¿™ä¹ˆè¯´å¯èƒ½æœ‰ç‚¹å¤æ‚ï¼Œä¸¾ä¸ªä¾‹å­ä¸€æ­¥ä¸€æ­¥è¯´æ˜ä¼šæ¯”è¾ƒå¥½ç†è§£ï¼Œæˆ‘ä»¬å°±ä¸¾ç”¨æˆ·åœ¨ä¸­é—´è¾“å…¥çš„ä¾‹å­æ¥è¯´ã€‚

ç”¨æˆ·å·²ç»è¾“å…¥å†…å®¹å¦‚ä¸‹ï¼Œå…‰æ ‡åœ¨æœ€å

```
1234 1234 1|
```

ç”¨æˆ·å°†è¦åœ¨ç¬¬äºŒä¸ª1åè¾“å…¥å†…å®¹ï¼Œå…‰æ ‡å¦‚ä¸‹ï¼Œè€Œå°†è¦è¾“å…¥å†…å®¹æ˜¯7890ã€‚

```
1234 1|234 1
```

è¾“å…¥åçš„æœ€æ–°å…‰æ ‡åº”è¯¥åœ¨7890çš„0åé¢

```
1234 1789 0|234 1
```

å¤„ç†æ•°æ®é€»è¾‘æµç¨‹

```
åŸæœ¬å†…å®¹ï¼š1234 1234 1
æ ¼å¼åŒ–åï¼š123412341

åŸå…‰æ ‡å³ï¼š234 1
æ ¼å¼åŒ–åï¼š2341

æ’å…¥å†…å®¹ï¼š1234 1789 0234 1
æ ¼å¼åŒ–åï¼š1234178902341
æ€»ç©ºæ ¼æ•°ï¼š3ä¸ª

é™¤å»å³è¾¹ï¼š123417890
åº”æœ‰æ ¼æ•°ï¼š2ä¸ª

å³è¾¹å­—æ•°ï¼š2341->4ä¸ª
å³è¾¹æ ¼æ•°ï¼š3-2=1
å³è¾¹å…‰æ ‡ï¼šä»å³å¾€å·¦ç§»åŠ¨4+1ä¸ªå•ä½
```

å…³é”®é€»è¾‘ä»£ç å¦‚ä¸‹
```

//è®¡ç®—ä¸å¸¦ç©ºæ ¼çš„å¡å·æŒ‰ç…§å››ä½ä¸ºä¸€ç»„å¾—å‡ºå¯åˆ†å‰²ç»„æ•°
+(NSInteger)getGroupCount:(NSInteger)length{
    return (NSInteger)ceilf((CGFloat)length /4);
}

//è·å–æ–°å­—ç¬¦å…‰æ ‡å³è¾¹å­—ç¬¦æ•°é•¿åº¦
//å³è¾¹æ€»å­—ç¬¦æ•°=åŸå³è¾¹å­—ç¬¦ä¸²é•¿åº¦+å³è¾¹åº”æœ‰ç©ºæ ¼æ•°
//å³è¾¹åº”æœ‰ç©ºæ ¼æ•°=æ€»å­—ç¬¦åº”æœ‰ç©ºæ ¼-å…‰æ ‡å·¦è¾¹å‰©ä½™å­—ç¬¦ç©ºæ ¼
+(NSInteger)getCursorRightStrLengthWithBankCardNumLength:(NSInteger)toTalLength AndRightNumCount:(NSInteger)rightNumCount{
    
    //æ‰€æœ‰ç©ºæ ¼æ•°
    NSInteger totalGroupCount = [self getGroupCount:toTalLength];
    
    //åŸå…‰æ ‡å·¦è¾¹ç©ºæ ¼æ•°
    NSInteger leftGroupCount = [self getGroupCount:toTalLength - rightNumCount];
    
    //è°ƒèŠ‚
    NSInteger totalSpaces = 0;
    if (totalGroupCount -1 > 0) {
        totalSpaces = totalGroupCount -1;
    }
    
    //è°ƒèŠ‚
    NSInteger leftSpaces = 0;
    if (leftGroupCount -1 > 0) {
        leftSpaces = leftGroupCount -1;
    }
    
    //å³è¾¹æ€»å­—ç¬¦æ•°+å³è¾¹æ€»ç©ºæ ¼æ•°
    return rightNumCount + (totalSpaces - leftSpaces);
}
```

#### 2.6 è®¾ç½®å…‰æ ‡

åœ¨**2.5**è·å–å…‰æ ‡ä½ç½®åï¼Œè¿˜éœ€è¦è®¾ç½®åˆ°`UITextField`ä¸­ï¼Œç”±äº`UITextField`æ²¡æœ‰ç›´æ¥è®¾ç½®å…‰æ ‡ä½ç½®çš„å‡½æ•°ï¼Œä½†å¯ä»¥é€šè¿‡`setSelectedTextRange`è®¾ç½®é€‰æ‹©ä½ç½®ã€‚å…¶å®æ­¤æ–¹æ³•æ˜¯è®¾ç½®é€‰æ‹©ä¸€æ®µæ–‡å­—çš„æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡è®¾ç½®é€‰å–å­—ç¬¦é•¿åº¦ä¸º0å³å¯è¾¾åˆ°ç§»åŠ¨å…‰æ ‡çš„æ•ˆæœã€‚å› æ­¤å°è£…äº†ä¸€ä¸ªæ–¹æ³•ï¼Œæ–¹ä¾¿ç›´æ¥é€šè¿‡`NSRange`è®¾ç½®`UITextField`å…‰æ ‡ã€‚

```
//é€šè¿‡NSRangeè®¾ç½®setSelectedTextRange
- (void)setSelectedRange:(NSRange)range{
    
    UITextPosition *beginning = self.beginningOfDocument;
    
    UITextPosition *startPosition = [self positionFromPosition:beginning offset:range.location];
    
    UITextPosition *endPosition = [self positionFromPosition:beginning offset:NSMaxRange(range)];
    
    UITextRange *selectionRange = [self textRangeFromPosition:startPosition toPosition:endPosition];
    
    [self setSelectedTextRange:selectionRange];
}
```

æœ‰äº†å°è£…æ–¹æ³•åï¼Œå°±åˆ°äº†çœŸæ­£è®¾ç½®çš„æ­¥éª¤ï¼šç”±äºåœ¨**2.4**ä¸­å·²ç»å¤„ç†å¹¶è®¾ç½®äº†æœ€æ–°è¾“å…¥çš„ç”¨æˆ·è¾“å…¥å€¼ã€‚æ‰€ä»¥`textField.text`å·²ç»æ˜¯æœ€æ–°çš„å€¼äº†ã€‚

ç„¶åæˆ‘ä»¬ç”¨æœ€æ–°å€¼çš„é•¿åº¦å‡å»**2.5**ä¸­è®¡ç®—å‡ºå…‰æ ‡å³è¾¹è¯¥æœ‰å­—ç¬¦é•¿åº¦çš„å€¼ï¼Œå°±æ˜¯å…‰æ ‡æœ€æ–°çš„ä½ç½®ã€‚

ä½†æ˜¯å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œé‡æ–°è®¾ç½®å…‰æ ‡åï¼Œæˆ‘ä»¬çš„å…‰æ ‡æœ‰å¯èƒ½æ˜¯åœ¨ç©ºæ ¼çš„åé¢ï¼Œå»ºè®®é‡åˆ°è¿™ç§æƒ…å†µç›´æ¥è®©å…‰æ ‡å†å¾€å‰ç§»ä¸€ä½ä»¥æå‡ä½“éªŒã€‚

```
//åˆ›å»ºå…‰æ ‡(é¢„æµ‹å…‰æ ‡)
NSRange newRange = NSMakeRange(textField.text.length - rightStrNum, 0);
    
//å…‰æ ‡å‰å­—ç¬¦
NSRange cursorLeftRange = NSMakeRange(newRange.location - 1, 1);

//é‡åˆ°ç©ºæ ¼åˆ™å¾€å‰ç§»ä¸€ä½
if (newRange.location > 0) {
    //è·å–å…‰æ ‡å‰ä¸€ä¸ªå­—ç¬¦
    NSString *cursorLeftStr = [textField.text substringWithRange:cursorLeftRange];

    if ([cursorLeftStr isEqualToString:@" "]) {
        newRange.location = newRange.location - 1;
    }
}
    
//è®¾ç½®å…‰æ ‡
[textField setSelectedRange:newRange];
```

### 3.å¤åˆ¶ç²˜è´´å‡ºç°çš„é—®é¢˜

ä»æ•ˆæœä¸Šçœ‹ä¸Šå»ï¼Œæ ¼å¼åŒ–è·Ÿå…‰æ ‡å®šä½å¥½åƒæ²¡é—®é¢˜ï¼Œä½†æ˜¯å‘ç°åœ¨ç”¨æˆ·å‘ç”Ÿå¤åˆ¶ç²˜è´´çš„åœºæ™¯ä¸‹ï¼Œå…‰æ ‡ä¼šåœ¨ä¸åŒæƒ…å†µä¸‹å‘ç”Ÿé”™ä¹±ï¼Œæµ‹è¯•å¾—å‡ºï¼Œæ˜¯å› ä¸ºè®¾ç½®ä¸åŒçš„é”®ç›˜æ–¹å¼æ‰€å¼•èµ·çš„ã€‚

ç”±äºæˆ‘ä»¬æ¯éš”å››ä½æ•°å­—ä¼šæ‰‹åŠ¨è¿½åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œä½†æ˜¯å¯¹äºæ•°å­—é”®ç›˜æ¥è¯´ï¼Œæ˜¯ä¸æ”¯æŒè¾“å…¥ç©ºæ ¼ï¼Œæ‰€ä»¥å‡å¦‚é‡åˆ°ä»¥ä¸‹æƒ…å†µï¼Œæ˜¯ä¼šå‘ç”Ÿé—®é¢˜çš„ã€‚

```
//åŸæœ¬å·²è¾“å…¥
1234 1

//åœ¨å…¶ä»–åœ°æ–¹å¤åˆ¶çš„æ•°å­—
9876

//åœ¨åŸæ¥è¾“å…¥æ¡†å‘èµ·ç²˜è´´åç†è®ºæ•ˆæœ
1234 1987 61|

//åœ¨åŸæ¥è¾“å…¥æ¡†å‘èµ·ç²˜è´´åå®é™…æ•ˆæœ
1234 1987 6|1
```

æ ¹æœ¬åŸå› å°±æ˜¯ä¸Šé¢æ‰€è¯´çš„ï¼Œè¢«å¤åˆ¶çš„å­—ç¬¦ä¸ªæ•°æ˜¯å››ä½ï¼Œåœ¨åŸæ¥è¾“å…¥çš„åœ°æ–¹ï¼ˆ**1234 1**ï¼‰ç²˜è´´**9876**ä¼šå› ä¸ºæ ¼å¼è€Œè¿½åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œå­—ç¬¦ä¸ªæ•°å˜æˆäº”ä¸ªï¼Œå¯¼è‡´è¶…è¿‡å¤åˆ¶å­—ç¬¦ä¸ªæ•°ï¼Œå¹¶ä¸”ç²˜è´´å‡ºæ¥çš„å­—ç¬¦ä¸æ”¯æŒåŸé”®ç›˜ï¼Œæ‰€ä»¥å¯¼è‡´å…‰æ ‡ä¸åœ¨æœŸå¾…ä½ç½®ä¸Šã€‚

> è§£å†³æ–¹æ¡ˆ1

å°†`UIKeyboardType`æ”¹æˆæ”¯æŒç©ºæ ¼çš„ç±»å‹ï¼Œä¸€èˆ¬å¯¹äºé“¶è¡Œå¡ä¸šåŠ¡ï¼Œå¤§å®¶éƒ½æ˜¯é€‰æ‹©æ•°å­—é”®ç›˜ï¼Œä½†ä¹Ÿæœ‰ç‰¹æ®Šæƒ…å†µï¼Œå› ä¸ºä¸Šé¢æœ‰ä»‹ç»è¿‡æ»¤éæ•°å­—çš„æ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥æ ¹æ®è‡ªèº«æƒ…å†µè¿›è¡Œæ–Ÿé…Œã€‚

> è§£å†³æ–¹æ¡ˆ2

åœ¨è®¾ç½®äº†æ•°å­—é”®ç›˜çš„æƒ…å†µä¸‹ï¼Œé‡åˆ°å¤åˆ¶ç²˜è´´æ—¶ï¼Œåˆ™é€šè¿‡å»¶æ—¶é‡è®¾ä¸€æ¬¡å…‰æ ‡ã€‚ä½†è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœå»¶æ—¶è¿‡é•¿ä¼šçœ‹å‡ºå…‰æ ‡è¿ç»­è·³è½¬çš„æƒ…å†µï¼Œæ‰€ä»¥æˆ‘é‡‡ç”¨äº†é›¶å»¶æ—¶è®¾ç½®ã€‚

```
//ç”¨æˆ·å‘ç”Ÿç²˜è´´çš„æƒ…å†µ
if ([string isEqualToString:[UIPasteboard generalPasteboard].string]) {
    //0å»¶æ—¶é‡è®¾ä¸€æ¬¡å…‰æ ‡
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.0*NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
        [textField setSelectedRange:newRange];
    });
}
```